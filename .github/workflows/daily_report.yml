name: Global Market Monitor Parallel

on:
  schedule:
    # å°åŒ—æ™‚é–“é€±ä¸€è‡³é€±äº” 18:30 (UTC 10:30)
    # æ­¤æ™‚å°è‚¡å·²æ”¶ç›¤ï¼Œç¾è‚¡å‰ä¸€æ™šæ•¸æ“šä¹Ÿå·²å®Œæ•´
    - cron: '30 10 * * 1-5'
  workflow_dispatch: 

jobs:
  # --- ä»»å‹™ Aï¼šç¾åœ‹å¸‚å ´ (ç¨ç«‹æ©Ÿå™¨) ---
  us-market:
    name: ğŸ‡ºğŸ‡¸ US Market Analysis
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: Environment Setup
        run: |
          sudo apt-get update
          sudo apt-get install -y fonts-noto-cjk
          python -m pip install --upgrade pip
          pip install pandas yfinance requests lxml tqdm resend matplotlib numpy

      - name: Run US Analysis
        env:
          RESEND_API_KEY: ${{ secrets.RESEND_API_KEY }}
        run: python main.py --market us-share

  # --- ä»»å‹™ Bï¼šå°ç£å¸‚å ´ (ç¨ç«‹æ©Ÿå™¨) ---
  taiwan-market:
    name: ğŸ‡¹ğŸ‡¼ Taiwan Market Analysis
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: Environment Setup
        run: |
          sudo apt-get update
          sudo apt-get install -y fonts-noto-cjk
          python -m pip install --upgrade pip
          pip install pandas yfinance requests lxml tqdm resend matplotlib numpy

      - name: Run TW Analysis
        env:
          RESEND_API_KEY: ${{ secrets.RESEND_API_KEY }}
        run: python main.py --market tw-share
